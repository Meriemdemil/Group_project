Course 
 Â« Computer Vision Â» 
 Sid - Ahmed Berrani 
 2024 - 2025 
 1 
 Correlation and convolution 
 Linear spatial filtering can be described in terms of correlation and convolution . 
 â€¢ Correlation : 
 The process of moving a filter mask over a signal ( the image in our case ) and computing 
 the sum of products at each location . 
 Correlation 
 An example : 
 Correlation vs. Convolution 
 â€¢ Correlation is a function of displacement of the filter . 
 Convolution works exactly the same way , but the filter is rotated by 180 Â° before the 
 shift operations . 
 A fundamental property of convolution is that convolving a function with a unit 
 impulse yields a copy of the mask at the location of the impulse . 
 4 
 2D Correlation / Convolution 
 ğ‘ ğ‘ 
 2 
 ğ¸[ğ‘– , ğ‘— ] = à· à· ğ‘¤ ğ‘  , ğ‘¡ âˆ’ ğ‘“(ğ‘– + ğ‘  , ğ‘— + ğ‘¡ ) 
 7 
 ğ‘ =âˆ’ğ‘ ğ‘¡=âˆ’ğ‘ 
 Template Matching 
 ğ‘ ğ‘ 
 2 
 ğ¸ ğ‘– , ğ‘— = à· à· ğ‘¤ ğ‘  , ğ‘¡ âˆ’ ğ‘“ ğ‘– + ğ‘  , ğ‘— + ğ‘¡ 
 ğ‘ =âˆ’ğ‘ ğ‘¡=âˆ’ğ‘ 
 ğ‘ ğ‘ 
 2 2 
 ğ¸ ğ‘– , ğ‘— = à· à· ğ‘¤ ğ‘  , ğ‘¡ + ğ‘“ ğ‘– + ğ‘  , ğ‘— + ğ‘¡ âˆ’ 2 ğ‘¤ ğ‘  , ğ‘¡ ğ‘“ ğ‘– + ğ‘  , ğ‘— + ğ‘¡ 
 ğ‘ =âˆ’ğ‘ ğ‘¡=âˆ’ğ‘ 
 Minimizing ğ¸ ğ‘– , ğ‘— = > Maximizing 
 ğ‘ ğ‘ 
 à· à· ğ‘¤ ğ‘  , ğ‘¡ ğ‘“ ğ‘– + ğ‘  , ğ‘— + ğ‘¡ = ğ‘¤â¨‚ğ‘“(ğ‘– , ğ‘— ) 
 ğ‘ =âˆ’ğ‘ ğ‘¡=âˆ’ğ‘ 
 8 
 Filters as Templates 
 â€¢ Filters offer a natural mechanism for finding simple patterns . 
 â€¢ Filters respond most strongly to pattern elements that look like the filter . 
 â¨‚ 
 â€¢ â¨‚ 
 9 
 Correlation as a Dot Product 
 When performing a correlation ( or a convolution ): 
 â€¢ The response is obtained by associating image elements with filter kernel elements , multiplying the 
 associated elements and summing 
 â€¢ It is the same process as a dot product . 
 â€¢ The dot product achieves its largest value when the vector representing the image is parallel to the 
 vector representing the kernel . 
 ïƒ A filter responds most strongly when it encounters an image pattern that looks like the filter . 
 ïƒ But this dot product is a poor way to find patterns because the response might be large just because 
 the image region is bright . 
 10 
 Correlation for Pattern Matching 
 w : 
 ğ’‚ ğ’ƒ 
 ğ‘¹ ğ’Š , ğ’‹ = ğ’˜â¨‚ğ’‡ ğ’Š , ğ’‹ = à· à· ğ’˜ ğ’” , ğ’• ğ’‡ ğ’Š + ğ’” , ğ’‹ + ğ’• 
 ğ’˜ğ’‡ 
 ğ’”=âˆ’ğ’‚ ğ’•=âˆ’ğ’ƒ 
 ğ‘… ğ¶ > ğ‘… ğµ > ğ‘… ğ´ 
 ğ‘¤ğ‘“ ğ‘¤ğ‘“ ğ‘¤ğ‘“ 
 However , we need ğ‘¹ ğ‘¨ to be the maximum . 
 ğ’˜ğ’‡ 
 11 
 Normalized Correlation for Pattern Matching 
 Solution : Normalizing the correlation 
 ğ‘ ğ‘ 
 Ïƒ Ïƒ ğ‘¤ ğ‘  , ğ‘¡ ğ‘“ ğ‘– + ğ‘  , ğ‘— + ğ‘¡ 
 ğ‘ =âˆ’ğ‘ ğ‘¡=âˆ’ğ‘ 
 ğ‘ ğ‘– , ğ‘— = 
 ğ‘¤ğ‘“ 
 Ïƒ Ïƒ ğ‘¤(ğ‘  , ğ‘¡)2 . Ïƒ Ïƒ ğ‘“(ğ‘– + ğ‘  , ğ‘– + ğ‘¡)2 
 ğ‘  ğ‘¡ ğ‘  ğ‘¡ 
 Energy of the template Energy of the image area covered 
 by the template 
 ïƒ This make the correlation insensitive to brightness . 
 12 
 Normalized Correlation for Pattern Matching 
 w : 
 Ïƒğ‘ Ïƒ ğ‘ ğ‘¤ ğ‘  , ğ‘¡ ğ‘“ ğ‘– + ğ‘  , ğ‘— + ğ‘¡ 
 ğ‘ =âˆ’ğ‘ ğ‘¡=âˆ’ğ‘ 
 ğ‘ ğ‘– , ğ‘— = 
 ğ‘¤ğ‘“ 
 Ïƒ Ïƒ ğ‘¤(ğ‘  , ğ‘¡)2 . Ïƒ Ïƒ ğ‘“(ğ‘– + ğ‘  , ğ‘– + ğ‘¡)2 
 ğ‘  ğ‘¡ ğ‘  ğ‘¡ 
 ğ‘ ğ´ > ğ‘ ğµ > ğ‘ ğ¶ 
 ğ‘¤ğ‘“ ğ‘¤ğ‘“ ğ‘¤ğ‘“ 
 13 
 Normalized Correlation for Pattern Matching 
 14 
 Normalized Correlation for Pattern Matching 
 â¨‚ = 
 15